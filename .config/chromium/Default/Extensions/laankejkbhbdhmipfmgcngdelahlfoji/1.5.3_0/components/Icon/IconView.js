define(["core/Logger","core/CoreAPI"],function(Logger,API){return API.Class.create({model:null,color:{RED:"#FF0000",YELLOW:"#FDD017",GREEN:"#009933"},icon:{ALLOWED:"common/img/eye_19x19_green.png",BLOCKED:"common/img/eye_19x19_red.png",DEFAULT:"common/img/eye_19x19_blue.png",NUCLEAR:"common/img/eye_19x19_nuclear.png"},showBadge:function(text,color,tabID){color=this.getColor(color),text=text||"",tabID=tabID||null,color&&this.setBadgeColor(color,tabID),this.setBadgeText(text,tabID),this.model.badgeVisible=!0},hideBadge:function(tabID){tabID=tabID||null,this.model.badgeVisible&&(this.setBadgeText("",tabID),this.model.badgeVisible=!1)},setIcon:function(type,tabID){tabID=tabID||null,API.Chrome.Icon.setURL({tabId:tabID,path:this.getIconURL(type)})},setBadgeColor:function(color,tabID){tabID=tabID||null,API.Chrome.Icon.setBadgeColor({tabId:tabID,color:color})},setBadgeText:function(text,tabID){tabID=tabID||null,API.Chrome.Icon.setBadgeText({tabId:tabID,text:text})},getColor:function(colorName){return"string"!=typeof colorName?null:this.color[colorName.toUpperCase()]||null},getIconURL:function(type){return"string"==typeof type&&type||(type="DEFAULT"),this.icon[type.toUpperCase()]}})});