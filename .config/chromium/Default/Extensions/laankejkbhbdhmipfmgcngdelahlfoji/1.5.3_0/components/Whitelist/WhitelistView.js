define(["core/Logger","core/CoreAPI","core/vendor/jquery.min","core/vendor/Brightline.min","core/vendor/text!components/Whitelist/whitelist.tpl","components/List/ListView"],function(Logger,API,$,Brightline,allowedSitesTpl,ListView){return API.Class.extend(ListView,{setJQuery:function(jQuery){$=jQuery||$,this._parent.setJQuery(jQuery)},refreshList:function(){this._parent.refreshList($("#allowedSitesList"),$("#newAllowedSites"))},render:function(){return this._parent.render(allowedSitesTpl)},bindUIHandlers:function(){this._parent.bindUIHandlers(),this.bindWhitelistUIHandlers()},bindWhitelistUIHandlers:function(){var $newAllowedSites=$("#newAllowedSites"),$addAllowedSitesInput=$("input[name=addAllowedSites]"),self=this;API.NuclearOption.isActive()?($newAllowedSites.val(API.Chrome.Translation.get("cannotAddAllowedSitesDuringNuclearOption")),$newAllowedSites.prop("disabled",!0),$newAllowedSites.addClass("disabled"),$addAllowedSitesInput.prop("disabled",!0)):($newAllowedSites.val(""),$newAllowedSites.prop("disabled",!1),$newAllowedSites.removeClass("disabled"),$addAllowedSitesInput.prop("disabled",!1),$addAllowedSitesInput.click(function(){API.PubSub.publish(self.getClassName()+".domains.add.WHITELIST")}))},getNewDomains:function(){return this._parent.getNewDomains($("#newAllowedSites").val())}})});