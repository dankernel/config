define(["core/Logger","core/CoreAPI","core/vendor/jquery.min"],function(Logger,API,$){var SmartBomb={timer:null,interval:1,smartBomb:{},init:function(){this.addListeners()},activate:function(smartBomb){this.smartBomb=smartBomb,clearInterval(this.timer),this.timer=setInterval(this.tick.bind(this),1e3*this.interval)},addListeners:function(){var self=this;API.PubSub.listen({message:"*.smartBomb.activate",handler:function(message,payload){self.activate(payload.smartBomb)}})},bomb:function(){this.smartBomb.multimedia&&this.bombMultimedia(),this.smartBomb.images&&this.bombImages(),this.smartBomb.forms&&this.bombForms(),this.smartBomb.logins&&this.bombLogins()},bombMultimedia:function(){var self=this;$("embed,object,applet,canvas,video,iframe").each(function(){self.replace($(this))})},bombImages:function(){var self=this;$("img").each(function(){self.replace($(this))})},bombForms:function(){var self=this;$("input,select,textarea").each(function(){self.replace($(this))})},bombLogins:function(){var self=this;$("input[type=password]").each(function(){self.replace($(this))})},replace:function(jqElement){if("StayFocusd-smartBombed"==jqElement.attr("class"))return!1;var width=jqElement.attr("width"),height=jqElement.attr("height"),display=jqElement.css("display");if("none"==display)return!1;var replacement='<div style="height:'+height+"px;width:"+width+"px;background:url("+API.Chrome.Extension.getURL("common/img/smartBombBG.png")+') #000" class="StayFocusd-smartBombed"></div>';jqElement.replaceWith(replacement)},tick:function(){this.bomb()}};return SmartBomb});