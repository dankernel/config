define(["core/Logger","core/CoreAPI","core/vendor/DropletJS.PubSub.min","core/DomainParser"],function(t,e,i,u){return e.Class.create({url:null,timer:null,status:null,fullDomain:null,baseDomain:null,construct:function(){this.url=e.StayFocusd.getCurrentURL(),this.status="INACTIVE",this.fullDomain=u.extractFullDomain(this.url),this.baseDomain=u.extractBaseDomain(this.url)},init:function(){var t=chrome.runtime.connect({name:"popup"}),e=this;t.onMessage.addListener(function(t){"StayFocusd.timer.updated"===t.message&&e.updateTimer(t.payload.displayTimer)})},updateTimer:function(t){this.timer=t,this.updateStatus(),i.publish("PopupModel.timer.updated",{timer:this.timer})},updateStatus:function(){this.status;this.status=e.NuclearOption.isActive()?"NUCLEAR":e.StayFocusd.isActive()===!1?"INACTIVE":"ACTIVE"},isActive:function(){return"ACTIVE"===this.status},isNuclear:function(){return"NUCLEAR"===this.status}})});